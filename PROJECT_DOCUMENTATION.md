# SQLatch - Î Î»Î®ÏÎ·Ï‚ Î¤ÎµÎºÎ¼Î·ÏÎ¯Ï‰ÏƒÎ· Project

> **ÎˆÎºÎ´Î¿ÏƒÎ·:** 1.0
> **Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±:** 2025-01-14
> **Î¤ÏÏ€Î¿Ï‚:** Educational SQL Platform Î¼Îµ Visual Programming

---

## ğŸ“‹ Î ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î±

1. [Î•Ï€Î¹ÏƒÎºÏŒÏ€Î·ÏƒÎ· Project](#ÎµÏ€Î¹ÏƒÎºÏŒÏ€Î·ÏƒÎ·-project)
2. [ÎšÏÏÎ¹Î± Î§Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬](#ÎºÏÏÎ¹Î±-Ï‡Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬)
3. [Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯ÎµÏ‚ & Dependencies](#Ï„ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯ÎµÏ‚--dependencies)
4. [Î‘ÏÏ‡Î¹Ï„ÎµÎºÏ„Î¿Î½Î¹ÎºÎ® Project](#Î±ÏÏ‡Î¹Ï„ÎµÎºÏ„Î¿Î½Î¹ÎºÎ®-project)
5. [Î”Î¿Î¼Î® Î¦Î±ÎºÎ­Î»Ï‰Î½](#Î´Î¿Î¼Î®-Ï†Î±ÎºÎ­Î»Ï‰Î½)
6. [Î‘Î½Î±Î»Ï…Ï„Î¹ÎºÎ® Î ÎµÏÎ¹Î³ÏÎ±Ï†Î® Î‘ÏÏ‡ÎµÎ¯Ï‰Î½](#Î±Î½Î±Î»Ï…Ï„Î¹ÎºÎ®-Ï€ÎµÏÎ¹Î³ÏÎ±Ï†Î®-Î±ÏÏ‡ÎµÎ¯Ï‰Î½)
7. [Workflows & Features](#workflows--features)
8. [Scripts & Commands](#scripts--commands)

---

## ğŸ¯ Î•Ï€Î¹ÏƒÎºÏŒÏ€Î·ÏƒÎ· Project

Î¤Î¿ **SQLatch** ÎµÎ¯Î½Î±Î¹ Î¼Î¹Î± ÎµÎºÏ€Î±Î¹Î´ÎµÏ…Ï„Î¹ÎºÎ® Ï€Î»Î±Ï„Ï†ÏŒÏÎ¼Î± Î³Î¹Î± Ï„Î· Î¼Î¬Î¸Î·ÏƒÎ· SQL Î¼Î­ÏƒÏ‰ **visual programming**. Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯ Ï„Î¿ Blockly Î³Î¹Î± Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎµÎ¹ Î­Î½Î± drag-and-drop interface Ï€Î¿Ï… Î¼ÎµÏ„Î±Ï„ÏÎ­Ï€ÎµÎ¹ blocks ÏƒÎµ SQL queries, ÎµÎºÏ„ÎµÎ»ÎµÎ¯ Ï„Î± queries ÏƒÎµ in-browser SQLite database, ÎºÎ±Î¹ Ï€Î±ÏÎ­Ï‡ÎµÎ¹ Î¬Î¼ÎµÏƒÎ± Î±Ï€Î¿Ï„ÎµÎ»Î­ÏƒÎ¼Î±Ï„Î±.

### Î£Ï„ÏŒÏ‡Î¿Ï‚
ÎÎ± ÎºÎ¬Î½ÎµÎ¹ Ï„Î·Î½ ÎµÎºÎ¼Î¬Î¸Î·ÏƒÎ· SQL Ï€ÏÎ¿ÏƒÎ²Î¬ÏƒÎ¹Î¼Î· ÏƒÎµ Î±ÏÏ‡Î¬ÏÎ¹Î¿Ï…Ï‚ Î¼Î­ÏƒÏ‰ Î¿Ï€Ï„Î¹ÎºÎ¿Ï Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î¿Ï, ÎµÎ½Ï Ï€Î±ÏÎ¬Î»Î»Î·Î»Î± Î´ÎµÎ¯Ï‡Î½ÎµÎ¹ Ï„Î¿ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÏŒ SQL code Ï€Î¿Ï… Ï€Î±ÏÎ¬Î³ÎµÏ„Î±Î¹.

### ÎšÏÏÎ¹Î± Î Î»ÎµÎ¿Î½ÎµÎºÏ„Î®Î¼Î±Ï„Î±
- âœ… **Zero-setup** - Î¤ÏÎ­Ï‡ÎµÎ¹ ÎµÎ¾Î¿Î»Î¿ÎºÎ»Î®ÏÎ¿Ï… ÏƒÏ„Î¿Î½ browser
- âœ… **Visual Programming** - Drag-and-drop SQL blocks
- âœ… **Instant Feedback** - Î†Î¼ÎµÏƒÎ· ÎµÎºÏ„Î­Î»ÎµÏƒÎ· queries
- âœ… **Educational Content** - Î•Î½ÏƒÏ‰Î¼Î±Ï„Ï‰Î¼Î­Î½Î± Î¼Î±Î¸Î®Î¼Î±Ï„Î± ÎºÎ±Î¹ ÏƒÎµÎ½Î¬ÏÎ¹Î±
- âœ… **Modern UI** - Dark theme, responsive, animations
- âœ… **Query History** - Î Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ queries
- âœ… **Auto-save** - Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· workspace

---

## ğŸŒŸ ÎšÏÏÎ¹Î± Î§Î±ÏÎ±ÎºÏ„Î·ÏÎ¹ÏƒÏ„Î¹ÎºÎ¬

### 1. Visual SQL Builder (Blockly)
- **Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Drag-and-drop interface Î³Î¹Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± SQL queries
- **Î“Î¹Î±Ï„Î¯:** ÎŸÎ¹ Î±ÏÏ‡Î¬ÏÎ¹Î¿Î¹ Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Î¼Î¬Î¸Î¿Ï…Î½ SQL Ï‡Ï‰ÏÎ¯Ï‚ Î½Î± Î¸Ï…Î¼Î¿ÏÎ½Ï„Î±Î¹ syntax
- **Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯Î±:** Google Blockly Î¼Îµ custom SQL blocks
- **Features:**
  - Continuous toolbox (scrollable categories)
  - Dark theme integration
  - Zoom controls & zoom-to-fit
  - Pinch-to-zoom Î³Î¹Î± mobile
  - Custom SQL blocks (SELECT, CREATE, INSERT, UPDATE, DELETE, WHERE, ORDER BY)

### 2. In-Browser SQL Database
- **Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Î•ÎºÏ„ÎµÎ»ÎµÎ¯ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ¬ SQL queries ÏƒÏ„Î¿Î½ browser
- **Î“Î¹Î±Ï„Î¯:** Î”ÎµÎ½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ backend server Î® database installation
- **Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯Î±:** SQLite WASM (WebAssembly)
- **Features:**
  - Î Î»Î®ÏÎ·Ï‚ SQL support
  - Persistent data ÎºÎ±Ï„Î¬ Ï„Î· Î´Î¹Î¬ÏÎºÎµÎ¹Î± Ï„Î·Ï‚ session
  - Pre-loaded databases Î³Î¹Î± scenarios
  - Error handling Î¼Îµ Ï†Î¹Î»Î¹ÎºÎ¬ Î¼Î·Î½ÏÎ¼Î±Ï„Î±

### 3. Interactive Guide System
- **Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Î Î±ÏÎ­Ï‡ÎµÎ¹ structured Î¼Î±Î¸Î®Î¼Î±Ï„Î±, Î±ÏƒÎºÎ®ÏƒÎµÎ¹Ï‚ ÎºÎ±Î¹ ÏƒÎµÎ½Î¬ÏÎ¹Î±
- **Î“Î¹Î±Ï„Î¯:** ÎšÎ±Î¸Î¿Î´Î·Î³Î·Î¼Î­Î½Î· Î¼Î¬Î¸Î·ÏƒÎ· Î±Ï€ÏŒ Î²Î±ÏƒÎ¹ÎºÎ¬ ÏƒÎµ Ï€ÏÎ¿Ï‡Ï‰ÏÎ·Î¼Î­Î½Î±
- **Features:**
  - Markdown-based lessons Î¼Îµ syntax highlighting
  - Auto-loading Blockly workspace Î±Î½Î¬ Î¼Î¬Î¸Î·Î¼Î±
  - Pre-configured databases Î³Î¹Î± ÎºÎ¬Î¸Îµ ÏƒÎµÎ½Î¬ÏÎ¹Î¿
  - Pagination Î¼Îµ visual indicators
  - Home page Î¼Îµ lesson overview

### 4. Query History & Management
- **Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** ÎšÎ±Ï„Î±Î³ÏÎ¬Ï†ÎµÎ¹ ÏŒÎ»Î± Ï„Î± executed queries Î¼Îµ metadata
- **Î“Î¹Î±Ï„Î¯:** Tracking Ï€ÏÎ¿ÏŒÎ´Î¿Ï… ÎºÎ±Î¹ ÎµÏÎºÎ¿Î»Î· Î±Î½Î±Ï†Î¿ÏÎ¬ ÏƒÎµ Ï€Î±Î»Î¹Î¬ queries
- **Features:**
  - Success/error status badges
  - Result count display
  - Query copy-to-clipboard
  - Individual query deletion
  - Clear all functionality
  - Timestamp tracking (ÎµÎ»Î»Î·Î½Î¹ÎºÎ® Î¼Î¿ÏÏ†Î®)
  - Collapsible panel

### 5. SQL Preview & Execution
- **Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Î”ÎµÎ¯Ï‡Î½ÎµÎ¹ Ï„Î¿ generated SQL Ï€ÏÎ¹Î½ Ï„Î¿ execution
- **Î“Î¹Î±Ï„Î¯:** Educational - Î¿Î¹ Ï‡ÏÎ®ÏƒÏ„ÎµÏ‚ Î²Î»Î­Ï€Î¿Ï…Î½ Ï„Î¹ SQL Ï€Î±ÏÎ¬Î³Î¿Ï…Î½ Ï„Î± blocks Ï„Î¿Ï…Ï‚
- **Features:**
  - Syntax-highlighted preview modal
  - Confirm/Cancel actions
  - Results modal Î¼Îµ table view
  - Error toasts Î¼Îµ detailed messages
  - Keyboard shortcut (Ctrl+Enter)

### 6. Workspace Persistence
- **Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Î±Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· ÎºÎ±Î¹ ÎµÏ€Î±Î½Î±Ï†Î¿ÏÎ¬ Ï„Î¿Ï… workspace
- **Î“Î¹Î±Ï„Î¯:** ÎŸÎ¹ Ï‡ÏÎ®ÏƒÏ„ÎµÏ‚ Î´ÎµÎ½ Ï‡Î¬Î½Î¿Ï…Î½ Ï„Î· Î´Î¿Ï…Î»ÎµÎ¹Î¬ Ï„Î¿Ï…Ï‚
- **Features:**
  - Auto-save ÎºÎ¬Î¸Îµ 2 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
  - LocalStorage persistence
  - Visual save indicator
  - URL-based workspace sharing
  - Import/Export functionality

### 7. Modern Responsive UI
- **Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Professional, dark-themed, mobile-friendly interface
- **Î“Î¹Î±Ï„Î¯:** Better user experience ÏƒÎµ ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ ÏƒÏ…ÏƒÎºÎµÏ…Î­Ï‚
- **Features:**
  - Dark theme Î¼Îµ gradients
  - Floating Action Button Î³Î¹Î± execution
  - Responsive breakpoints (desktop, tablet, mobile)
  - Touch-optimized Î³Î¹Î± mobile
  - Smooth animations & transitions
  - Bootstrap Icons integration

### 8. Keyboard Shortcuts
- **Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** GyorsÃ­tÃ³tÃ¡rok Î³Î¹Î± common actions
- **Î“Î¹Î±Ï„Î¯:** Power users Î¼Ï€Î¿ÏÎ¿ÏÎ½ Î½Î± Î´Î¿Ï…Î»Î­ÏˆÎ¿Ï…Î½ Ï€Î¹Î¿ Î³ÏÎ®Î³Î¿ÏÎ±
- **Shortcuts:**
  - `Ctrl+Enter` - Execute query
  - `Ctrl+S` - Share URL modal
  - Custom hook Î³Î¹Î± extensibility

---

## ğŸ› ï¸ Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯ÎµÏ‚ & Dependencies

### Core Framework
| Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯Î± | ÎˆÎºÎ´Î¿ÏƒÎ· | Î§ÏÎ®ÏƒÎ· |
|------------|--------|-------|
| **Next.js** | 13.5.4 | React framework Î¼Îµ SSR/SSG capabilities |
| **React** | 18.2.0 | UI library Î³Î¹Î± component-based architecture |
| **TypeScript** | 5.2.2 | Type safety ÎºÎ±Î¹ developer experience |

**Î“Î¹Î±Ï„Î¯ Next.js:**
- Automatic code splitting Î³Î¹Î± performance
- Built-in routing
- Optimized production builds
- Zero-config setup

### Visual Programming
| Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯Î± | ÎˆÎºÎ´Î¿ÏƒÎ· | Î§ÏÎ®ÏƒÎ· |
|------------|--------|-------|
| **Blockly** | 10.2.2 | Core visual programming library |
| **@blockly/continuous-toolbox** | 5.0.8 | Scrollable toolbox Î³Î¹Î± Ï€Î¿Î»Î»Î¬ blocks |
| **@blockly/theme-dark** | 6.0.4 | Dark theme integration |
| **@blockly/zoom-to-fit** | 5.0.9 | Auto-zoom functionality |

**Î“Î¹Î±Ï„Î¯ Blockly:**
- Industry-standard visual programming Î±Ï€ÏŒ Google
- Extensible Î¼Îµ custom blocks
- Code generation ÏƒÎµ Î¿Ï€Î¿Î¹Î±Î´Î®Ï€Î¿Ï„Îµ Î³Î»ÏÏƒÏƒÎ± (SQL ÏƒÏ„Î· Î´Î¹ÎºÎ® Î¼Î±Ï‚ Ï€ÎµÏÎ¯Ï€Ï„Ï‰ÏƒÎ·)
- Mobile support

### Database
| Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯Î± | ÎˆÎºÎ´Î¿ÏƒÎ· | Î§ÏÎ®ÏƒÎ· |
|------------|--------|-------|
| **@sqlite.org/sqlite-wasm** | 3.43.2 | In-browser SQL database |

**Î“Î¹Î±Ï„Î¯ SQLite WASM:**
- Î Î»Î®ÏÎ·Ï‚ SQL database ÏƒÏ„Î¿Î½ browser Ï‡Ï‰ÏÎ¯Ï‚ server
- WebAssembly Î³Î¹Î± native-like performance
- Persistent data ÏƒÏ„Î· session
- ÎŠÎ´Î¹Î¿ syntax Î¼Îµ production databases

### UI/UX
| Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯Î± | ÎˆÎºÎ´Î¿ÏƒÎ· | Î§ÏÎ®ÏƒÎ· |
|------------|--------|-------|
| **Bootstrap** | 5.3.2 | CSS framework Î³Î¹Î± layout & components |
| **React Bootstrap** | 2.9.1 | React components Î³Î¹Î± Bootstrap |
| **Bootstrap Icons** | 1.11.2 | Icon library |

**Î“Î¹Î±Ï„Î¯ Bootstrap:**
- Proven responsive grid system
- Pre-built components
- Dark theme support
- Accessibility features

### Content Processing
| Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯Î± | ÎˆÎºÎ´Î¿ÏƒÎ· | Î§ÏÎ®ÏƒÎ· |
|------------|--------|-------|
| **Showdown** | 2.1.0 | Markdown to HTML converter |
| **html-react-parser** | 4.2.9 | Î‘ÏƒÏ†Î±Î»Î®Ï‚ HTML parsing ÏƒÏ„Î· React |
| **DOMPurify** | 3.3.0 | XSS protection Î³Î¹Î± HTML content |

**Î“Î¹Î±Ï„Î¯ Î±Ï…Ï„Î¬:**
- Markdown Î³Î¹Î± ÎµÏÎºÎ¿Î»Î· ÏƒÏ…Î³Î³ÏÎ±Ï†Î® lessons
- DOMPurify Î³Î¹Î± security (XSS prevention)
- html-react-parser Î³Î¹Î± React-safe rendering

### Development Tools
| Î¤ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯Î± | ÎˆÎºÎ´Î¿ÏƒÎ· | Î§ÏÎ®ÏƒÎ· |
|------------|--------|-------|
| **ESLint** | - | Code quality & style enforcement |
| **Prettier** | 3.6.2 | Code formatting |
| **TypeScript** | 5.2.2 | Static type checking |

---

## ğŸ—ï¸ Î‘ÏÏ‡Î¹Ï„ÎµÎºÏ„Î¿Î½Î¹ÎºÎ® Project

### Component Architecture
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Next.js Application               â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        Pages Layer (_app, index)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         Context Providers             â”‚ â”‚
â”‚  â”‚  â€¢ BlocklyContext (workspace mgmt)    â”‚ â”‚
â”‚  â”‚  â€¢ SQLiteContext (database ops)       â”‚ â”‚
â”‚  â”‚  â€¢ QueryHistoryContext (history)      â”‚ â”‚
â”‚  â”‚  â€¢ AutoSaveContext (persistence)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        Component Tree                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Layout (Navbar)                â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚   Blockly    â”‚  â”‚     Guide     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚   + FAB      â”‚  â”‚  + History    â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚     Modals (Preview, Output)    â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow
```
User Action (Drag Block)
         â†“
BlocklyContext (workspace state)
         â†“
Generate SQL Code (Blockly.JavaScript)
         â†“
User clicks FAB â†’ Preview Modal
         â†“
User confirms â†’ SQLiteContext.queryDB()
         â†“
QueryHistoryContext.addQuery()
         â†“
Display Results / Error Toast
         â†“
AutoSaveContext (save workspace)
```

### State Management Strategy
- **React Context API** Î³Î¹Î± global state (ÏŒÏ‡Î¹ Redux - overkill Î³Î¹Î± Ï„Î¿ scope)
- **Local useState** Î³Î¹Î± component-specific state
- **useRef** Î³Î¹Î± Blockly workspace reference
- **LocalStorage** Î³Î¹Î± persistence
- **URL parameters** Î³Î¹Î± sharing

---

## ğŸ“ Î”Î¿Î¼Î® Î¦Î±ÎºÎ­Î»Ï‰Î½

```
SQLatch/
â”œâ”€â”€ public/                          # Static assets
â”‚   â”œâ”€â”€ Intro/                       # Intro modal content
â”‚   â”œâ”€â”€ MDGuides/                    # Educational content
â”‚   â”‚   â”œâ”€â”€ Lessons/                 # Structured lessons
â”‚   â”‚   â”œâ”€â”€ Scenarios/               # Story-based scenarios
â”‚   â”‚   â””â”€â”€ Tasks/                   # Practice exercises
â”‚   â””â”€â”€ favicon.png                  # App icon
â”‚
â”œâ”€â”€ src/                             # Source code
â”‚   â”œâ”€â”€ components/                  # React components
â”‚   â”‚   â”œâ”€â”€ blockly/                 # Blockly-related
â”‚   â”‚   â”œâ”€â”€ common/                  # Reusable components
â”‚   â”‚   â”œâ”€â”€ guide/                   # Tutorial system
â”‚   â”‚   â”œâ”€â”€ layout/                  # Layout components
â”‚   â”‚   â”œâ”€â”€ modals/                  # Modal dialogs
â”‚   â”‚   â”œâ”€â”€ sql/                     # SQL-related
â”‚   â”‚   â””â”€â”€ ui/                      # UI elements
â”‚   â”‚
â”‚   â”œâ”€â”€ contexts/                    # React Context providers
â”‚   â”‚   â”œâ”€â”€ AutoSaveContext.tsx      # Workspace auto-save
â”‚   â”‚   â”œâ”€â”€ BlocklyContext.tsx       # Blockly state
â”‚   â”‚   â”œâ”€â”€ QueryHistoryContext.tsx  # Query tracking
â”‚   â”‚   â””â”€â”€ SQLiteContext.tsx        # Database operations
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                       # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ useAutoSave.ts           # Auto-save logic
â”‚   â”‚   â””â”€â”€ useKeyboardShortcut.ts   # Keyboard bindings
â”‚   â”‚
â”‚   â”œâ”€â”€ modules/                     # Core modules
â”‚   â”‚   â”œâ”€â”€ Blockly/                 # Blockly configuration
â”‚   â”‚   â”‚   â”œâ”€â”€ Blockly.ts           # Init & config
â”‚   â”‚   â”‚   â””â”€â”€ Blocks/              # Custom block definitions
â”‚   â”‚   â”œâ”€â”€ Showdown.ts              # Markdown processor
â”‚   â”‚   â””â”€â”€ SQLite.ts                # Database wrapper
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/                       # Next.js pages
â”‚   â”‚   â”œâ”€â”€ _app.tsx                 # App wrapper with providers
â”‚   â”‚   â””â”€â”€ index.tsx                # Main page
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                      # CSS Modules
â”‚   â”‚   â”œâ”€â”€ global.css               # Global styles
â”‚   â”‚   â”œâ”€â”€ blockly.module.css       # Blockly styles
â”‚   â”‚   â”œâ”€â”€ guide.module.css         # Guide styles
â”‚   â”‚   â”œâ”€â”€ queryHistory.module.css  # History styles
â”‚   â”‚   â””â”€â”€ runtimeControl.module.css # Deprecated (was top bar)
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                       # TypeScript definitions
â”‚   â”‚   â””â”€â”€ global.d.ts              # Global type declarations
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                       # Utility functions
â”‚   â”‚   â”œâ”€â”€ exportResults.ts         # CSV/JSON export
â”‚   â”‚   â””â”€â”€ fileOperations.ts        # File handling
â”‚   â”‚
â”‚   â””â”€â”€ config/                      # Configuration files
â”‚       â””â”€â”€ lessons.ts               # Lesson metadata
â”‚
â”œâ”€â”€ package.json                     # Dependencies & scripts
â”œâ”€â”€ tsconfig.json                    # TypeScript configuration
â”œâ”€â”€ next.config.js                   # Next.js configuration
â”œâ”€â”€ .eslintrc.json                   # ESLint rules
â”œâ”€â”€ .prettierrc                      # Prettier formatting
â””â”€â”€ PROJECT_DOCUMENTATION.md         # This file

```

---

## ğŸ“„ Î‘Î½Î±Î»Ï…Ï„Î¹ÎºÎ® Î ÎµÏÎ¹Î³ÏÎ±Ï†Î® Î‘ÏÏ‡ÎµÎ¯Ï‰Î½

### Root Files

#### `package.json`
**Î¤Î¹ ÎµÎ¯Î½Î±Î¹:** NPM configuration file
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** ÎŸÏÎ¯Î¶ÎµÎ¹ dependencies, scripts, ÎºÎ±Î¹ project metadata
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:**
- Î”Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ· ÎµÎ¾Î±ÏÏ„Î®ÏƒÎµÏ‰Î½ (dependencies & devDependencies)
- NPM scripts Î³Î¹Î± development, build, lint, format
- Browser field Î³Î¹Î± polyfills (fs, os, path = false)

**ÎšÏÏÎ¹Î± Scripts:**
```json
"dev": "next dev -p 3000"        // Development server
"build": "next build"            // Production build
"lint": "next lint"              // ESLint check
"format": "prettier --write"     // Code formatting
"type-check": "tsc --noEmit"     // TypeScript check
```

#### `tsconfig.json`
**Î¤Î¹ ÎµÎ¯Î½Î±Î¹:** TypeScript configuration
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** ÎŸÏÎ¯Î¶ÎµÎ¹ TypeScript compiler options
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:**
- Type checking rules
- Module resolution strategy
- JSX support Î³Î¹Î± React
- Path aliases (@/ Î³Î¹Î± src/)

#### `next.config.js`
**Î¤Î¹ ÎµÎ¯Î½Î±Î¹:** Next.js configuration
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Custom Next.js build settings
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:**
- Webpack configuration
- Environment variables
- Image optimization settings
- Custom headers/redirects

---

## ğŸ“‚ src/components/

### blockly/

#### `BlocklyField.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Main Blockly workspace component Î¼Îµ SQL execution
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Î¤Î¿ ÎºÎ­Î½Ï„ÏÎ¿ Ï„Î·Ï‚ ÎµÏ†Î±ÏÎ¼Î¿Î³Î®Ï‚ - drag-and-drop SQL builder

**Features:**
- Blockly workspace initialization Î¼Îµ dark theme
- Mobile detection & touch optimization
- Pinch-to-zoom support
- Zoom-to-fit control
- **Floating Action Button** Î³Î¹Î± query execution
- SQL preview modal integration
- Results display modal
- Error toast notifications
- Auto-save integration
- Keyboard shortcuts (Ctrl+Enter)
- URL parameter loading Î³Î¹Î± sharing

**Contexts Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯:**
- `BlocklyContext` - Workspace management
- `SQLiteContext` - Query execution
- `QueryHistoryContext` - History tracking

**Dependencies:**
- `blockly` - Core library
- `@blockly/continuous-toolbox` - Scrollable toolbox
- `@blockly/theme-dark` - Dark theme
- `@blockly/zoom-to-fit` - Auto-zoom

**Key Functions:**
```typescript
showResult()      // Display query results or errors
onClickRun()      // Generate SQL and show preview
executeSQL()      // Execute query and update history
```

---

### common/

#### `BaseModal.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Reusable modal wrapper component
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** DRY principle - single modal base Î³Î¹Î± ÏŒÎ»Î± Ï„Î± modals

**Props:**
- `show: boolean` - Visibility state
- `onHide: () => void` - Close handler
- `title: string` - Modal title
- `children: ReactNode` - Modal content
- `size?: 'sm' | 'lg' | 'xl'` - Modal size
- `fullscreen?: boolean | string` - Fullscreen on mobile

**Features:**
- Responsive fullscreen on mobile (<768px)
- Dark theme styling
- Centered layout
- Custom header with close button
- Animation transitions

#### `IconButton.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Reusable button Î¼Îµ icon
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Consistent button styling across app

**Props:**
- `icon: string` - Bootstrap icon class
- `onClick: () => void` - Click handler
- `variant?: string` - Bootstrap variant
- `children?: ReactNode` - Button text

---

### guide/

#### `Guide.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Main guide container - orchestrates lessons/scenarios
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Educational content management

**State:**
- `idxState` - Current lesson index
- `inHome` - Show home vs lesson
- `MDGuides` - Rendered HTML content
- `isLoading` - Loading state

**Features:**
- Lesson navigation (prev/next/home)
- Auto-load Blockly workspace per lesson
- Auto-load database per scenario
- Markdown to HTML conversion
- Lazy loading Î¼Îµ Suspense
- **Query History display** (ÏƒÏ„Î¿ ÎºÎ¬Ï„Ï‰ Î¼Î­ÏÎ¿Ï‚)

**Contexts:**
- `BlocklyContext` - Load workspace files
- `SQLiteContext` - Load databases
- `Showdown` - Markdown conversion

#### `GuideContent.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Displays rendered lesson content
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Separation of concerns - content rendering

**Features:**
- Sanitized HTML rendering (DOMPurify)
- Loading spinner
- Syntax highlighting Î³Î¹Î± code blocks
- Responsive typography

#### `GuideHome.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Landing page Î¼Îµ lesson list
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** User-friendly lesson selection

**Features:**
- Card-based lesson grid
- Lesson names display
- Click handlers Î³Î¹Î± navigation
- Responsive grid (2 columns â†’ 1 on mobile)

#### `GuidePagination.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Lesson navigation controls
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Easy navigation between lessons

**Features:**
- Previous/Next buttons
- Home button
- Page numbers Î¼Îµ active state
- Disabled states Î³Î¹Î± first/last
- Responsive design

---

### layout/

#### `Navbar.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Top navigation bar
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** App-wide navigation ÎºÎ±Î¹ actions

**Features:**
- Logo/Brand
- **Î‘ÏÏ‡ÎµÎ¯Î¿** dropdown:
  - Î†Î½Î¿Î¹Î³Î¼Î± Î±ÏÏ‡ÎµÎ¯Î¿Ï… (.json)
  - Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· workspace (.json)
  - Î•Î¾Î±Î³Ï‰Î³Î® Î±Ï€Î¿Ï„ÎµÎ»ÎµÏƒÎ¼Î¬Ï„Ï‰Î½ (CSV/JSON)
- **Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚** dropdown:
  - Keyboard shortcuts modal
- **ÎšÎ¿Î¹Î½Î¿Ï€Î¿Î¯Î·ÏƒÎ·** button:
  - Share URL modal
- Auto-save indicator
- Responsive hamburger menu (mobile)
- Dark theme

**Modals:**
- `KeyboardShortcutsModal` - Show shortcuts
- `ShareURLModal` - Generate share URLs

**Contexts:**
- `BlocklyContext` - File operations
- `AutoSaveContext` - Save indicator

---

### modals/

#### `IntroModal.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Welcome modal on first visit
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Onboarding Î³Î¹Î± Î½Î­Î¿Ï…Ï‚ users

**Features:**
- Markdown content Î±Ï€ÏŒ `/public/Intro/text.md`
- Auto-show on mount
- Responsive fullscreen on mobile
- DOMPurify sanitization

#### `KeyboardShortcutsModal.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Shows available keyboard shortcuts
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** User education - power user features

**Shortcuts displayed:**
- `Ctrl+Enter` - Execute query
- `Ctrl+S` - Share URL

#### `ShareURLModal.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Generate shareable URL Î¼Îµ workspace state
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Collaboration - share workspace Î¼Îµ Î¬Î»Î»Î¿Ï…Ï‚

**Features:**
- Base64 encode workspace JSON
- Copy to clipboard functionality
- Success toast notification
- URL preview

**Contexts:**
- `BlocklyContext` - Get workspace state

#### `SQLOutputModal.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Display query results ÏƒÎµ table format
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** User-friendly results visualization

**Props:**
- `output: Record<string, unknown>[]` - Query results
- `show: boolean`
- `onHide: () => void`

**Features:**
- Responsive table
- Auto-detect columns Î±Ï€ÏŒ data
- Scrollable Î³Î¹Î± many rows
- Empty state message
- Dark theme styling

#### `SQLPreviewModal.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Preview generated SQL before execution
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Educational - show SQL code, allow cancellation

**Props:**
- `sqlCode: string` - Generated SQL
- `onConfirm: () => void` - Execute handler
- `show: boolean`
- `onHide: () => void`

**Features:**
- Syntax highlighting
- Pre-formatted code display
- Confirm/Cancel buttons
- Copy code functionality (future)

---

### sql/

#### `QueryHistory.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Display ÎºÎ±Î¹ manage ÎµÎºÏ„ÎµÎ»ÎµÏƒÎ¼Î­Î½Î± queries
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Progress tracking ÎºÎ±Î¹ query reuse

**State:**
- `isOpen: boolean` - Collapse state

**Features:**
- **Collapsible panel** Î¼Îµ chevron icon
- **Query count badge**
- **Success/Error status badges** (âœ“/âœ—)
- **Timestamp** (ÎµÎ»Î»Î·Î½Î¹ÎºÎ® Î¼Î¿ÏÏ†Î®: DD/MM/YYYY HH:MM)
- **Result count** Î³Î¹Î± successful queries
- **Error message** display
- **Copy query** to clipboard
- **Delete individual** query
- **Clear all** functionality
- **Empty state** Î¼Îµ animated icon
- **Custom scrollbar** styling
- **Hover animations**
- **Modern gradient design**

**Contexts:**
- `QueryHistoryContext` - CRUD operations

**UI Design:**
- Dark theme Î¼Îµ #1a1d29, #252a3a backgrounds
- Blue accents #4a9eff
- Gradient buttons
- Float animation Î³Î¹Î± empty icon

#### `SQLRuntimeControl.tsx` (DEPRECATED)
**Î¤Î¹ Î®Ï„Î±Î½:** Old top bar Î¼Îµ execute button
**Î“Î¹Î±Ï„Î¯ deprecated:** ÎœÎµÏ„Î±ÎºÎ¹Î½Î®Î¸Î·ÎºÎµ ÏƒÏ„Î¿ BlocklyField Ï‰Ï‚ FAB

**Status:** Î”ÎµÎ½ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Î±Î¹ Ï€Î»Î­Î¿Î½, Î±Î»Î»Î¬ ÎºÏÎ±Ï„Î®Î¸Î·ÎºÎµ Î³Î¹Î± reference

---

### ui/

#### `AutoSaveIndicator.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Visual indicator Î³Î¹Î± auto-save status
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** User feedback - workspace is being saved

**States:**
- "Saving..." - During save
- "Saved" - After successful save
- Fade out animation

**Contexts:**
- `AutoSaveContext` - Listen to save events

#### `ErrorToast.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Error notification toast
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** User-friendly error messages

**Props:**
- `error: string` - Error message
- `show: boolean`
- `onHide: () => void`

**Features:**
- Auto-hide after 5s
- Dismissible
- Red theme
- Bottom-right position

#### `LoadingSpinner.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Loading indicator
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Feedback Î³Î¹Î± async operations

**Props:**
- `message?: string` - Optional loading text

**Features:**
- Bootstrap spinner
- Centered layout
- Dark theme

#### `SuccessToast.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Success notification toast
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Positive feedback Î³Î¹Î± actions

**Props:**
- `message: string`
- `show: boolean`
- `onHide: () => void`

**Features:**
- Auto-hide after 3s
- Green theme
- Dismissible

---

## ğŸ“‚ src/contexts/

### `AutoSaveContext.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Auto-save workspace logic
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Prevent data loss

**State:**
- `lastSaved: Date | null` - Timestamp
- `isSaving: boolean` - Save in progress

**Functions:**
```typescript
triggerSave()     // Manual save trigger
```

**How it works:**
- Listens to BlocklyContext changes
- Debounced save (2s delay)
- Saves to LocalStorage
- Updates lastSaved timestamp

**LocalStorage key:** `blockly-workspace-autosave`

### `BlocklyContext.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Blockly workspace state management
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Central workspace control

**State:**
- `workspace: Blockly.WorkspaceSvg | null`
- `toolbox: JSON` - Blockly toolbox config

**Functions:**
```typescript
initBlockly()                  // Initialize custom blocks
initGen()                      // Initialize SQL generator
setWorkspace(ws)              // Set workspace reference
getWorkspace()                // Get workspace reference
runGen()                      // Generate SQL from blocks
loadWorkspaceFile(path)       // Load .json workspace
loadWorkspaceState(state)     // Load from object
getWorkspaceState()           // Export workspace
getToolbox()                  // Get toolbox config
```

**How it works:**
- Wraps Blockly API
- Manages custom SQL blocks
- Code generation (Blockly.JavaScript)
- File I/O operations

### `QueryHistoryContext.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Query history management
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Track executed queries

**State:**
- `history: QueryEntry[]`

**QueryEntry interface:**
```typescript
{
  id: string           // UUID
  query: string        // SQL code
  timestamp: Date      // Execution time
  success: boolean     // Success/error
  resultCount?: number // Row count
  error?: string       // Error message
}
```

**Functions:**
```typescript
addQuery(query, success, resultCount?, error?)
deleteQuery(id)
clearHistory()
```

**Persistence:** LocalStorage Î¼Îµ key `sql-query-history`

### `SQLiteContext.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** SQLite database operations
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Execute SQL queries in-browser

**State:**
- `db: sqlite3 | null` - Database instance
- `resultDB: Record<string, unknown>[]` - Query results
- `error: string` - Last error

**Functions:**
```typescript
initSQL()              // Initialize SQLite WASM
queryDB(sql)          // Execute SQL query
getResultDB()         // Get last results
getError()            // Get last error
resetDB()             // Clear database
loadDB(path)          // Load .db file
```

**How it works:**
- Loads SQLite WASM module
- Creates in-memory database
- Executes queries Î¼Îµ exec()
- Parses results to JSON
- Error handling Î¼Îµ try-catch

---

## ğŸ“‚ src/hooks/

### `useAutoSave.ts`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Custom hook Î³Î¹Î± auto-save functionality
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Reusable auto-save logic

**Usage:**
```typescript
useAutoSave(data, saveFunction, delay)
```

**How it works:**
- useEffect Î¼Îµ debounce
- Saves after N ms of inactivity
- Prevents excessive saves

### `useKeyboardShortcut.ts`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Custom hook Î³Î¹Î± keyboard bindings
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Reusable shortcut logic

**Usage:**
```typescript
useKeyboardShortcut({ key: 'Enter', ctrl: true }, callback)
```

**Options:**
- `key: string` - Key name
- `ctrl?: boolean` - Ctrl modifier
- `shift?: boolean` - Shift modifier
- `alt?: boolean` - Alt modifier

**How it works:**
- Adds keydown listener
- Checks modifiers
- Calls callback if match
- Cleanup on unmount

---

## ğŸ“‚ src/modules/

### Blockly/

#### `Blockly.ts`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Blockly initialization ÎºÎ±Î¹ custom block loading
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Custom SQL block definitions

**Functions:**
```typescript
initializeBlockly()    // Load all custom blocks
getSQLGenerator()      // Get SQL code generator
```

**Custom Blocks loaded:**
- `select.json` - SELECT statement
- `create.json` - CREATE TABLE
- `insert.json` - INSERT INTO
- `update.json` - UPDATE
- `delete.json` - DELETE FROM
- `where.json` - WHERE clause
- `order_by.json` - ORDER BY clause
- `column.json` - Column definition
- `column_name.json` - Column reference
- `value.json` - Value input
- `set.json` - SET clause

#### `Blocks/*.json`
**Î¤Î¹ ÎµÎ¯Î½Î±Î¹:** Blockly block definitions
**Î¤Î¹ Ï€ÎµÏÎ¹Î­Ï‡Î¿Ï…Î½:**
- Block structure (inputs, fields, connections)
- Block color/style
- Code generator (JavaScript)

**Example: `select.json`**
```json
{
  "type": "select",
  "message0": "SELECT %1 FROM %2 %3 %4",
  "args0": [
    { "type": "input_value", "name": "COLUMNS" },
    { "type": "field_input", "name": "TABLE" },
    { "type": "input_value", "name": "WHERE" },
    { "type": "input_value", "name": "ORDER" }
  ]
}
```

#### `toolbox.json`
**Î¤Î¹ ÎµÎ¯Î½Î±Î¹:** Blockly toolbox configuration
**Î¤Î¹ Î¿ÏÎ¯Î¶ÎµÎ¹:** Categories ÎºÎ±Î¹ available blocks

**Categories:**
- Î“ÎµÎ½Î¹ÎºÎ¬ (SELECT, WHERE, ORDER BY)
- Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± (CREATE TABLE, COLUMN)
- Î•Î¹ÏƒÎ±Î³Ï‰Î³Î® (INSERT INTO, VALUES)
- Î•Ï€Î¹Î»Î¿Î³Î® (SELECT variants)
- Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· (UPDATE, SET)
- Î”Î¹Î±Î³ÏÎ±Ï†Î® (DELETE FROM)

### `Showdown.ts`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Markdown to HTML converter wrapper
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Lesson content rendering

**Functions:**
```typescript
useShowdown()
  .convertMd(path)    // Load MD file and convert to HTML
```

**Configuration:**
- Tables support
- Strikethrough
- Task lists
- Code highlighting

### `SQLite.ts`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** SQLite WASM wrapper
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Simplified database API

**Functions:**
```typescript
initSQLite()         // Load WASM module
executeQuery(sql)    // Run SQL query
loadDatabase(path)   // Load .db file
```

**How it works:**
- Loads sqlite-wasm module
- Creates OPFS-based database
- Provides promise-based API

---

## ğŸ“‚ src/pages/

### `_app.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Next.js app wrapper
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Global providers ÎºÎ±Î¹ styles

**Wraps:**
- BlocklyProvider
- SQLiteProvider
- QueryHistoryProvider
- AutoSaveProvider

**Imports:**
- Bootstrap CSS
- Bootstrap Icons
- Global CSS

### `index.tsx`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Main page - app layout
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Single-page app structure

**Layout:**
```
<Navbar />
<Container>
  <Row>
    <Col lg={7}>
      <BlocklyField />  {/* + FAB */}
    </Col>
    <Col lg={5}>
      <Guide />  {/* + QueryHistory */}
    </Col>
  </Row>
</Container>
<IntroModal />
```

**Features:**
- Responsive grid (70/30 split on desktop, stacked on mobile)
- Lazy loading (Guide, IntroModal)
- Dark theme
- Viewport meta tag Î³Î¹Î± mobile

---

## ğŸ“‚ src/styles/

### `global.css`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Global CSS styles
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** App-wide styling

**Defines:**
- `.wh-100` - Full width/height utility
- `.bg-dark` - Dark background
- Body styling (dark theme, font)
- Scrollbar styling

### `blockly.module.css`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Blockly workspace styles
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Workspace sizing ÎºÎ±Î¹ FAB styling

**Classes:**
- `.container` - Workspace container Î¼Îµ responsive height
- `.floatingButton` - FAB (Floating Action Button)
  - Fixed position bottom-right
  - Green gradient
  - Pill shape (border-radius: 50px)
  - Hover animations (lift effect)
  - Responsive (icon-only on mobile)

### `guide.module.css`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Guide panel styles
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Lesson content styling

**Classes:**
- `.container` - Main guide container
- `.card` - Lesson card styling
- `.pagination` - Navigation buttons
- `.content` - Markdown content styling

### `queryHistory.module.css`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Query history panel styles
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Modern history UI

**Classes:**
- `.container` - Main container Î¼Îµ gradients
- `.header` - Collapsible header
- `.toggleButton` - Collapse toggle
- `.badge` - Query count badge
- `.listItem` - Individual query item
- `.queryCode` - SQL code display
- `.statusBadge` - Success/error indicator
- `.actionButton` - Copy/delete buttons
- `.emptyState` - No queries state
- `.emptyIcon` - Animated floating icon

**Design:**
- Dark gradients (#1a1d29, #252a3a)
- Blue accents (#4a9eff)
- Green success (#28a745)
- Red error (#dc3545)
- Float animation Î³Î¹Î± empty icon

### `runtimeControl.module.css` (DEPRECATED)
**Î¤Î¹ Î®Ï„Î±Î½:** Old execute button bar styles
**Î“Î¹Î±Ï„Î¯ deprecated:** Replaced by FAB in blockly.module.css

---

## ğŸ“‚ src/types/

### `global.d.ts`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Global TypeScript type declarations
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Type safety Î³Î¹Î± custom types

**Declares:**
- Window extensions
- Module declarations
- Global interfaces

---

## ğŸ“‚ src/utils/

### `exportResults.ts`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Export query results ÏƒÎµ CSV/JSON
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Data export functionality

**Functions:**
```typescript
exportToCSV(data, filename)
exportToJSON(data, filename)
```

**How it works:**
- Converts data to format
- Creates Blob
- Triggers download

### `fileOperations.ts`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** File read/write operations
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Workspace import/export

**Functions:**
```typescript
readFile(file)           // Read file content
downloadFile(data, name) // Trigger download
```

---

## ğŸ“‚ src/config/

### `lessons.ts`
**Î¤Î¹ ÎºÎ¬Î½ÎµÎ¹:** Lesson metadata configuration
**Î“Î¹Î±Ï„Î¯ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹:** Central lesson configuration

**Exports:**
- `LTS: string[]` - Lesson file paths
- `LTSBlocks: string[]` - Workspace files
- `LTSNames: string[]` - Display names
- `DBs: string[]` - Database files

**Content:**
- 3 Lessons (SELECT, CREATE TABLE, INSERT)
- 1 Task
- 3 Scenarios (story-based learning)

---

## ğŸ“‚ public/

### `Intro/text.md`
**Î¤Î¹ ÎµÎ¯Î½Î±Î¹:** Intro modal content
**Î¤Î¹ Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹:** Welcome message ÎºÎ±Î¹ quick start

### `MDGuides/`
**Î¤Î¹ ÎµÎ¯Î½Î±Î¹:** Educational content directory
**Î”Î¿Î¼Î®:**
```
MDGuides/
â”œâ”€â”€ Lessons/           # Structured tutorials
â”‚   â”œâ”€â”€ Lesson1/       # SELECT basics
â”‚   â”œâ”€â”€ Lesson2/       # CREATE TABLE
â”‚   â””â”€â”€ Lesson3/       # INSERT data
â”œâ”€â”€ Scenarios/         # Story-based learning
â”‚   â”œâ”€â”€ Scenario1/     # Magic book story
â”‚   â”œâ”€â”€ Scenario2/     # Museum theft
â”‚   â””â”€â”€ Scenario3/     # Planet exploration
â””â”€â”€ Tasks/             # Practice exercises
```

**File types:**
- `theory.md` / `scen.md` / `tasks.md` - Lesson content
- `blocks.json` - Pre-configured Blockly workspace
- `database.db` - SQLite database Î³Î¹Î± Ï„Î¿ scenario

---

## ğŸ”„ Workflows & Features

### User Journey: Î•ÎºÏ„Î­Î»ÎµÏƒÎ· Query

1. **User opens app**
   - IntroModal shows (first visit)
   - Blockly workspace loads
   - SQLite initializes

2. **User drags blocks**
   - Blockly workspace updates
   - Auto-save triggers (2s debounce)

3. **User clicks FAB** (Floating Action Button)
   - SQL code generates Î±Ï€ÏŒ blocks
   - Preview modal opens Î¼Îµ SQL

4. **User confirms**
   - SQLite executes query
   - Results/error captured
   - Query added to history
   - Results modal shows / Error toast shows

5. **User views history**
   - Clicks "Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Queries" ÏƒÏ„Î¿ guide panel
   - Sees all past queries Î¼Îµ status
   - Can copy/delete queries

### Auto-Save Flow

1. **Workspace changes**
   - BlocklyContext updates
   - AutoSaveContext detects change

2. **Debounce timer** (2s)
   - Waits for user to stop editing

3. **Save**
   - Workspace exported to JSON
   - Saved to LocalStorage
   - Indicator shows "Saving..."

4. **Complete**
   - Indicator shows "Saved"
   - Fades out after 2s

### Lesson Navigation Flow

1. **User opens app**
   - Guide shows home page Î¼Îµ lesson list

2. **User selects lesson**
   - Markdown loads and renders
   - Associated Blockly workspace loads
   - Database loads (if scenario)

3. **User navigates**
   - Prev/Next buttons
   - Home button returns to list
   - Page numbers Î³Î¹Î± direct access

---

## ğŸ® Scripts & Commands

### Development
```bash
npm run dev          # Start dev server on port 3000
npm run build        # Production build
npm run lint         # Check code quality
npm run lint:fix     # Auto-fix lint issues
```

### Code Quality
```bash
npm run format       # Format all files Î¼Îµ Prettier
npm run format:check # Check formatting
npm run type-check   # TypeScript validation
```

### Production
```bash
npm run build        # Build Î³Î¹Î± production
npm start            # Start production server
```

---

## ğŸ¨ Design System

### Colors
- **Primary Background:** #1a1d29, #252a3a (dark gradients)
- **Accent:** #4a9eff (blue)
- **Success:** #28a745 (green)
- **Error:** #dc3545 (red)
- **Text:** #e1e4ed (light gray)

### Typography
- **Font:** System font stack
- **Headings:** Bold, gradient text
- **Code:** 'Consolas', 'Monaco', monospace

### Spacing
- **Container padding:** 12-20px
- **Gap:** 8-15px
- **Border radius:** 6-12px (buttons), 20px (badges), 50px (pills)

### Animations
- **Transitions:** `all 0.3s ease`
- **Hover effects:** `translateY(-2px)`, enhanced shadows
- **Float animation:** Keyframe Î³Î¹Î± empty states

---

## ğŸ”’ Security

### XSS Prevention
- **DOMPurify** sanitizes ÏŒÎ»Î¿ Ï„Î¿ HTML content
- **html-react-parser** Î³Î¹Î± React-safe rendering
- User input escaped ÏƒÏ„Î± queries

### Data Privacy
- **No backend** - ÏŒÎ»Î± Ï„Î± data Î¼Î­Î½Î¿Ï…Î½ ÏƒÏ„Î¿Î½ browser
- **LocalStorage only** - no cookies, no tracking
- **No analytics** - privacy-first

---

## ğŸ“± Responsive Breakpoints

- **Desktop:** â‰¥992px (70/30 split)
- **Tablet:** 768-991px (60/40 split, stacked)
- **Mobile:** <768px (stacked layout, icon-only FAB)
- **Small mobile:** <576px (reduced padding, compact UI)

---

## ğŸš€ Future Enhancements

### Planned Features
- [ ] More SQL blocks (JOIN, GROUP BY, HAVING)
- [ ] Multiple database support
- [ ] Query performance metrics
- [ ] Collaborative editing (realtime)
- [ ] Export workspace to SQL file
- [ ] Import SQL to blocks (reverse)
- [ ] Dark/Light theme toggle
- [ ] More scenarios ÎºÎ±Î¹ lessons

### Known Limitations
- SQLite WASM requires modern browser
- Large databases may be slow
- No server-side persistence
- Limited to SQLite SQL dialect

---

## ğŸ“ Î•Ï€Î±Ï†Î® & Î Î»Î·ÏÎ¿Ï†Î¿ÏÎ¯ÎµÏ‚

**Project Type:** Educational Platform
**License:** [Specify]
**Created:** 2024
**Version:** 1.0

---

**Î¤Î­Î»Î¿Ï‚ Î¤ÎµÎºÎ¼Î·ÏÎ¯Ï‰ÏƒÎ·Ï‚**
